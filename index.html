<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Event Portal</title>
    <style>
        nav {
            background-color: #333;
            padding: 10px;
        }
        nav a {
            color: white;
            margin-right: 15px;
            text-decoration: none;
        }
        
        #welcomeBanner {
            background-color: blue;
            color: white;
            padding: 20px;
            margin: 10px 0;
        }
        
        .event-image {
            border: 2px solid #ddd;
            padding: 5px;
            margin: 5px;
            width: 200px;
            height: 150px;
            object-fit: cover;
        }
        
        form {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        form label {
            display: block;
            margin-top: 10px;
        }
        form input, form select, form textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
        }
        .highlight {
            background-color: yellow;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <nav>
        <a href="#home">Home</a>
        <a href="#events">Events</a>
        <a href="#contact">Contact</a>
        <a href="help.html" target="_blank">Help</a>
    </nav>
    <main>
        <section id="home">
            <div id="welcomeBanner">
                <h1>Welcome to Our Community Portal!</h1>
                <p>Discover upcoming events and connect with your neighbors.</p>
                <p>Special offer: <span style="color: red; font-weight: bold;">Register today and get 10% off!</span></p>
                <p class="highlight">New users get exclusive access to premium events!</p>
            </div>
        </section>

        <section id="events">
            <h2>Past Community Events</h2>
            <table>
                <tr>
                    <td>
                        <img src="event1.jpg" alt="Summer Festival" title="Summer Festival" class="event-image">
                        <p>Annual Summer Festival 2023</p>
                    </td>
                    <td>
                        <img src="event2.jpg" alt="Food Fair" title="Food Fair" class="event-image">
                        <p>Local Food Fair</p>
                    </td>
                    <td>
                        <img src="event3.jpg" alt="Art Exhibition" title="Art Exhibition" class="event-image">
                        <p>Community Art Exhibition</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <img src="event4.jpg" alt="Charity Run" title="Charity Run" class="event-image">
                        <p>Annual Charity Run</p>
                    </td>
                    <td>
                        <img src="event5.jpg" alt="Book Club" title="Book Club" class="event-image">
                        <p>Monthly Book Club Meeting</p>
                    </td>
                    <td>
                        <img src="event6.jpg" alt="Farmers Market" title="Farmers Market" class="event-image">
                        <p>Weekly Farmers Market</p>
                    </td>
                </tr>
            </table>
        </section>

        <section id="register">
            <h2>Event Registration</h2>
            <form id="registrationForm" onsubmit="return handleSubmit(event)">
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required autofocus placeholder="Enter your full name">

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required placeholder="Enter your email">

                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" onblur="validatePhone(this)">

                <label for="eventDate">Event Date:</label>
                <input type="date" id="eventDate" name="eventDate" required>

                <label for="eventType">Event Type:</label>
                <select id="eventType" name="eventType" onchange="showEventFee(this)">
                    <option value="">Select an event</option>
                    <option value="festival">Community Festival ($10)</option>
                    <option value="workshop">Workshop ($15)</option>
                    <option value="concert">Summer Concert ($25)</option>
                    <option value="sports">Sports Tournament ($5)</option>
                </select>
                <div id="feeDisplay"></div>

                <label for="message">Special Requests:</label>
                <textarea id="message" name="message" placeholder="Any special requirements?" onkeyup="countChars(this)"></textarea>
                <p id="charCount">0 characters</p>

                <button type="submit" onclick="showConfirmation()">Register</button>
                <output id="confirmation" name="confirmation"></output>
            </form>
        </section>

        <section id="video">
            <h2>Event Promo Video</h2>
            <video id="eventVideo" width="640" height="360" controls oncanplay="videoReady()">
                <source src="event_promo.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <p id="videoStatus"></p>
        </section>

        <section id="location">
            <h2>Find Events Near You</h2>
            <button onclick="findNearbyEvents()">Find Nearby Events</button>
            <div id="locationResult"></div>
        </section>

        <section id="preferences">
            <h2>User Preferences</h2>
            <button onclick="clearPreferences()">Clear Preferences</button>
        </section>
    </main>

    <footer id="contact">
        <p>Â© 2023 Community Event Portal</p>
        <p>Contact us at: events@community.org</p>
    </footer>

    <script>
        window.onload = function() {
            const savedEventType = localStorage.getItem('preferredEventType');
            if (savedEventType) {
                document.getElementById('eventType').value = savedEventType;
            }
        };

        function handleSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const eventType = formData.get('eventType');
            if (eventType) {
                localStorage.setItem('preferredEventType', eventType);
            }
            
            document.getElementById('confirmation').value = "Thank you for registering!";
            return false;         }

        function validatePhone(input) {
            const phoneRegex = /^\d{10}$/;
            if (input.value && !phoneRegex.test(input.value)) {
                alert('Please enter a valid 10-digit phone number');
                input.focus();
            }
        }

        function showEventFee(select) {
            const fees = {
                'festival': '$10',
                'workshop': '$15',
                'concert': '$25',
                'sports': '$5'
            };
            const feeDisplay = document.getElementById('feeDisplay');
            
            if (select.value) {
                feeDisplay.innerHTML = `Fee: <span class="highlight">${fees[select.value]}</span>`;
            } else {
                feeDisplay.innerHTML = '';
            }
        }

        function showConfirmation() {
        }

        function countChars(textarea) {
            document.getElementById('charCount').textContent = `${textarea.value.length} characters`;
        }

        function videoReady() {
            document.getElementById('videoStatus').textContent = 'Video ready to play!';
        }

        function findNearbyEvents() {
            const options = {
                enableHighAccuracy: true,
                timeout: 5000,
                maximumAge: 0
            };

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const result = document.getElementById('locationResult');
                        result.innerHTML = `
                            <p>Your location: 
                                Latitude: ${position.coords.latitude.toFixed(4)}, 
                                Longitude: ${position.coords.longitude.toFixed(4)}
                            </p>
                            <p>Nearest event: Community Center (0.5 miles away)</p>
                        `;
                    },
                    function(error) {
                        const result = document.getElementById('locationResult');
                        let message = '';
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                message = "Location permission denied. Please enable location services.";
                                break;
                            case error.POSITION_UNAVAILABLE:
                                message = "Location information unavailable.";
                                break;
                            case error.TIMEOUT:
                                message = "Location request timed out.";
                                break;
                            case error.UNKNOWN_ERROR:
                                message = "An unknown error occurred.";
                                break;
                        }
                        result.innerHTML = `<p class="highlight">${message}</p>`;
                    },
                    options
                );
            } else {
                document.getElementById('locationResult').innerHTML = 
                    '<p class="highlight">Geolocation is not supported by this browser.</p>';
            }
        }

        
        function clearPreferences() {
            localStorage.removeItem('preferredEventType');
            sessionStorage.clear();
            alert('Your preferences have been cleared!');
            document.getElementById('eventType').value = '';
        }

        window.onbeforeunload = function(e) {
            const form = document.getElementById('registrationForm');
            if (form && (form.name.value || form.email.value || form.eventDate.value)) {
                e.preventDefault();
                e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
                return e.returnValue;
            }
        };
        document.querySelectorAll('.event-image').forEach(img => {
            img.ondblclick = function() {
                this.style.width = (this.style.width === '400px') ? '200px' : '400px';
                this.style.height = (this.style.height === '300px') ? '150px' : '300px';
            };
        });
    </script>
</body>
</html>